{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"QueryHound","text":"<p>A fast, simple CLI to analyze MongoDB JSON logs for slow queries, COLLSCANs, and more.</p> <ul> <li>Source: https://github.com/dmcna005/queryhound_qh</li> <li>PyPI: https://pypi.org/project/queryhound/</li> </ul> <p>Use the left nav to explore installation, usage, and examples.</p>"},{"location":"examples/","title":"Examples","text":""},{"location":"examples/#1-slow-queries-only","title":"1) Slow queries only","text":"<pre><code>qh mongodb.log --slow\n</code></pre>"},{"location":"examples/#2-collscans-only","title":"2) COLLSCANs only","text":"<pre><code>qh mongodb.log --scan\n</code></pre>"},{"location":"examples/#3-namespace-minimum-duration-filter","title":"3) Namespace + minimum duration filter","text":"<pre><code>qh mongodb.log --namespace app.users --min-ms 50\n</code></pre>"},{"location":"examples/#4-percentile-stats-csv-export","title":"4) Percentile stats + CSV export","text":"<pre><code>qh mongodb.log --pstats --output-csv report.csv\n</code></pre>"},{"location":"examples/#5-filter-raw-lines-by-keywords-plus-summary","title":"5) Filter raw lines by keywords (plus summary)","text":"<pre><code>qh mongodb.log --filter \"index\" \"COLLSCAN\"\n</code></pre>"},{"location":"examples/#6-connection-sources-remote-ip-app","title":"6) Connection sources (Remote IP + App)","text":"<pre><code>qh mongodb.log --connections\n</code></pre> <p>Verbose (no truncation):</p> <pre><code>qh mongodb.log --connections --verbose\n</code></pre>"},{"location":"examples/#7-slow-queries-with-full-plan-summaries","title":"7) Slow queries with full plan summaries","text":"<pre><code>qh mongodb.log --slow --verbose\n</code></pre>"},{"location":"examples/#8-slow-collscan-queries-with-percentile-stats","title":"8) Slow COLLSCAN queries with percentile stats","text":"<pre><code>qh mongodb.log --slow --scan --pstats\n</code></pre>"},{"location":"examples/#9-slow-queries-within-a-date-range","title":"9) Slow queries within a date range","text":"<pre><code>qh mongodb.log --slow --start-date 2025-09-10 --end-date 2025-09-12\n</code></pre> <p>With percentile stats + verbose:</p> <pre><code>qh mongodb.log --slow --start-date 2025-09-10T00:00:00 --end-date 2025-09-12T23:59:59 --pstats --verbose\n</code></pre>"},{"location":"examples/#10-inspect-only-errors-and-fatals","title":"10) Inspect only errors and fatals","text":"<pre><code>qh mongodb.log --error\n</code></pre> <p>Show full messages:</p> <pre><code>qh mongodb.log --error --verbose\n</code></pre>"},{"location":"examples/#11-focus-on-one-percentile","title":"11) Focus on one percentile","text":"<pre><code>qh mongodb.log --slow --pvalue P90\n</code></pre>"},{"location":"examples/#12-drill-into-a-namespace-and-export","title":"12) Drill into a namespace and export","text":"<pre><code>qh mongodb.log --scan --namespace sales.orders --output-csv sales_collscan.csv\n</code></pre>"},{"location":"examples/#13-combine-filter-error-mode","title":"13) Combine filter &amp; error mode","text":"<pre><code>qh mongodb.log --filter \"ReplicaSetMonitor\" --error\n</code></pre>"},{"location":"faq/","title":"FAQ","text":""},{"location":"faq/#why-doesnt-qh-run-right-after-install","title":"Why doesn\u2019t <code>qh</code> run right after install?","text":"<p>Open a new terminal to pick up PATH changes. QueryHound also attempts a best-effort PATH update on first run.</p>"},{"location":"faq/#does-queryhound-modify-my-shell-profile","title":"Does QueryHound modify my shell profile?","text":"<p>If the user scripts dir isn\u2019t on PATH, it appends an export line to <code>~/.zprofile</code> (or falls back to <code>~/.zshrc</code>). Opt-out with <code>QUERYHOUND_SKIP_PATH_UPDATE=1</code>.</p>"},{"location":"faq/#what-log-format-is-supported","title":"What log format is supported?","text":"<p>MongoDB JSON structured logs.</p>"},{"location":"faq/#how-is-query-shape-determined","title":"How is Query Shape determined?","text":"<p>Priority: existing <code>queryShapeHash</code> / <code>queryShapeId</code>; else a derived concise signature from the command body or pipeline.</p>"},{"location":"faq/#why-are-some-fields-truncated","title":"Why are some fields truncated?","text":"<p>To keep tables readable. Use <code>--verbose</code> to disable truncation.</p>"},{"location":"faq/#will-output-csv-include-error-or-connection-tables","title":"Will <code>--output-csv</code> include error or connection tables?","text":"<p>No, it only exports the slow / scan summary table.</p>"},{"location":"faq/#how-do-i-only-see-fatal-issues","title":"How do I only see fatal issues?","text":"<p>Use <code>--error</code> then filter the output (Fatal shows severity <code>F</code>).</p>"},{"location":"getting-started/","title":"Getting Started","text":""},{"location":"getting-started/#install","title":"Install","text":"<pre><code>pip install -U queryhound\n</code></pre> <p>If <code>qh</code> isn\u2019t found after install, open a new terminal. QueryHound attempts to add your user scripts directory to PATH automatically on first run (opt\u2011out with <code>QUERYHOUND_SKIP_PATH_UPDATE=1</code>).</p>"},{"location":"getting-started/#quick-check","title":"Quick check","text":"<pre><code>qh --version\nqh --help\n</code></pre>"},{"location":"getting-started/#first-exploration","title":"First exploration","text":"<p>Show slow queries with extended stats:</p> <pre><code>qh mongo.log --slow --pstats\n</code></pre> <p>List connection sources:</p> <pre><code>qh mongo.log --connections\n</code></pre> <p>Show only errors / fatals:</p> <pre><code>qh mongo.log --error\n</code></pre>"},{"location":"release-notes/","title":"Release Notes","text":""},{"location":"release-notes/#060","title":"0.6.0","text":"<ul> <li>Add <code>--error</code> mode to list severity Error/Fatal (E/F) entries with truncated messages (use <code>--verbose</code> for full)</li> </ul>"},{"location":"release-notes/#050","title":"0.5.0","text":"<ul> <li>Derive operation from <code>attr.type</code> when present</li> <li>Add Query Shape column (uses <code>queryShapeHash</code> or derived from command object)</li> <li>Truncation improvements for new column</li> </ul>"},{"location":"release-notes/#040","title":"0.4.0","text":"<ul> <li>Add <code>--connections</code> mode aggregating connection events by remote IP and app name</li> <li>Truncate long plan / app fields for <code>--slow</code> / <code>--scan</code> tables</li> <li>Add <code>--verbose</code> flag to show full untruncated values</li> </ul>"},{"location":"release-notes/#030","title":"0.3.0","text":"<ul> <li>Add <code>-v/--version</code></li> <li>Auto PATH update helper</li> </ul>"},{"location":"release-notes/#020","title":"0.2.0","text":"<ul> <li>Packaging and CI improvements</li> </ul>"},{"location":"release-notes/#01x","title":"0.1.x","text":"<ul> <li>Initial release</li> </ul>"},{"location":"usage/","title":"Usage &amp; CLI Options","text":"<p>QueryHound operates on MongoDB JSON structured logs.</p> <pre><code>qh &lt;logfile&gt; [options]\n</code></pre>"},{"location":"usage/#options","title":"Options","text":"<ul> <li><code>--scan</code> \u2014 Only show COLLSCAN queries (plan &amp; shape truncated by default)</li> <li><code>--slow</code> \u2014 Only show slow queries (ms &gt;= 100) (plan &amp; shape truncated by default)</li> <li><code>--start-date &lt;ISO&gt;</code> \u2014 Start date (ISO 8601 or YYYY-MM-DD)</li> <li><code>--end-date &lt;ISO&gt;</code> \u2014 End date (ISO 8601 or YYYY-MM-DD)</li> <li><code>--namespace &lt;db.collection&gt;</code> \u2014 Filter by namespace</li> <li><code>--min-ms &lt;int&gt;</code> \u2014 Minimum duration (ms)</li> <li><code>--pstats</code> \u2014 Include P75, P90, P99 stats</li> <li><code>--pvalue &lt;P50|P75|P90|P99&gt;</code> \u2014 Include a specific percentile</li> <li><code>--output-csv &lt;path&gt;</code> \u2014 Write output to CSV (slow / scan summary tables only)</li> <li><code>--filter &lt;str ...&gt;</code> \u2014 Show lines containing any provided strings (also prints matching raw lines)</li> <li><code>--connections</code> \u2014 Aggregate connection accepted events by Remote IP + App Name</li> <li><code>--error</code> \u2014 Show only Error / Fatal severity log lines (<code>s</code> in {E,F})</li> <li><code>--verbose</code> \u2014 Disable truncation (Plan / App Name / Query Shape / Error Message)</li> <li><code>-v, --version</code> \u2014 Show version and exit</li> </ul>"},{"location":"usage/#truncation-behavior","title":"Truncation Behavior","text":"<p>For readability, very long fields are truncated when using: <code>--slow</code>, <code>--scan</code>, <code>--connections</code>, or <code>--error</code>. Truncated fields: Plan, App Name, Query Shape, Error Message. Use <code>--verbose</code> to show full values.</p>"},{"location":"usage/#percentiles","title":"Percentiles","text":"<ul> <li>When <code>--pvalue</code> is <code>P50</code>, the median (P50) column is added.</li> <li>When <code>--pstats</code> is set, P75, P90, P99 columns are appended.</li> </ul>"},{"location":"usage/#query-shape-column","title":"Query Shape Column","text":"<p>Appears in slow / scan summaries. Resolution priority:</p> <ol> <li>Use <code>queryShapeHash</code> / <code>queryShapeId</code> if present.</li> <li>Else derive from the command object: main verb (<code>find</code>, <code>aggregate</code>, <code>count</code> \u2026) + concise signature (e.g. filter keys or first pipeline stages).</li> </ol> <p>Purpose: cluster similar logical operations without dumping full query bodies.</p>"},{"location":"usage/#connections-mode","title":"Connections Mode","text":"<p><code>--connections</code> groups connection-accepted events by Remote IP + App Name. App name is extracted from any of: <code>appName</code>, <code>applicationName</code>, <code>client.application.name</code>.</p>"},{"location":"usage/#error-mode","title":"Error Mode","text":"<p><code>--error</code> filters lines whose severity field <code>s</code> is <code>E</code> (Error) or <code>F</code> (Fatal) and prints a table of: Timestamp, Severity, Component, ID, Message (truncated unless <code>--verbose</code>).</p>"},{"location":"usage/#csv-output","title":"CSV Output","text":"<p><code>--output-csv</code> exports only the tabular slow/scan summary (not raw filtered lines or connections/errors output).</p>"},{"location":"usage/#combining-flags","title":"Combining Flags","text":"<p>Common combos:</p> <pre><code>qh mongo.log --slow --pstats\nqh mongo.log --scan --pvalue P90\nqh mongo.log --slow --namespace sales.orders --min-ms 250\nqh mongo.log --slow --start-date 2025-09-15 --end-date 2025-09-16 --pvalue P50\nqh mongo.log --error --verbose\n</code></pre>"}]}